name: Manage Railway Server

on:
  schedule:
    - cron: "0 0 26 * *"  # Запуск 26-го числа кожного місяця о 00:00 UTC
    - cron: "0 0 5 * *"   # Зупинка 5-го числа кожного місяця о 00:00 UTC

jobs:
  manage-server:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install Railway CLI
        run: curl -fsSL https://railway.app/install.sh | sh

      - name: Authenticate with Railway
        run: railway login --token ${{ secrets.RAILWAY_TOKEN }}

      - name: Start Railway Service
        if: github.event.schedule == '0 0 26 * *'
        run: railway up

      - name: Stop Railway Service
        if: github.event.schedule == '0 0 5 * *'
        run: railway down
